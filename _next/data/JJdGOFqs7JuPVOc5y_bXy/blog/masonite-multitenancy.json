{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var r=Object.create;var t=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var l=a=>t(a,\"__esModule\",{value:!0});var u=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=>{l(a);for(var c in s)t(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let e of h(s))!m.call(a,e)&&e!==\"default\"&&t(a,e,{get:()=>s[e],enumerable:!(c=d(s,e))||c.enumerable});return a},g=a=>k(l(t(a!=null?r(p(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((T,i)=>{i.exports=_jsx_runtime});var w={};N(w,{default:()=>b,frontmatter:()=>y});var n=g(o()),y={title:\"Masonite Multitenancy\",date:\"2022-07-17\",tags:[\"masonite\",\"multitenant\",\"python\"],draft:!1,summary:\"Multitenancy is a feature that allows you to have multiple tenants in your application. This is useful for things like a company having multiple websites, or a company having multiple apps.\"};function f(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({h1:\"h1\",a:\"a\",span:\"span\",p:\"p\",h3:\"h3\",ul:\"ul\",li:\"li\",input:\"input\",pre:\"pre\",code:\"code\",em:\"em\",strong:\"strong\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(\"p\",{align:\"center\",children:(0,n.jsx)(\"img\",{src:\"https://banners.beyondco.de/Masonite%20Multitenancy.png?theme=light&packageManager=pip+install&packageName=masonite-multitenancy&pattern=charlieBrown&style=style_2&description=Multitenancy+package+for+masonite.&md=1&showWatermark=1&fontSize=100px&images=adjustments&widths=50&heights=50\"})}),(0,n.jsxs)(e.h1,{id:\"masonite-multitenancy-wip\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#masonite-multitenancy-wip\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Masonite Multitenancy (WIP)\"]}),(0,n.jsx)(e.p,{children:\"Multitenancy package for Masonite!\"}),(0,n.jsx)(e.p,{children:\"Multitenancy is a feature that allows you to have multiple tenants in your application. This is useful for things like a company having multiple websites, or a company having multiple apps.\"}),(0,n.jsxs)(e.h3,{id:\"features\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#features\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Features\"]}),(0,n.jsxs)(e.ul,{className:\"contains-task-list\",children:[(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{checked:!0,disabled:!0,type:\"checkbox\"}),\" \",\"Create a new tenant (with domain)\"]}),(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{checked:!0,disabled:!0,type:\"checkbox\"}),\" \",\"Tenant specific configurations\"]}),(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{checked:!0,disabled:!0,type:\"checkbox\"}),\" \",\"Tenant specific migrations and seeders\"]}),(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{checked:!0,disabled:!0,type:\"checkbox\"}),\" \",\"Tenant middleware to specify tenant in request on the fly\"]})]}),(0,n.jsxs)(e.h3,{id:\"installation\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#installation\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Installation\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"pip \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),` masonite-multitenancy\n`]})})}),(0,n.jsxs)(e.h3,{id:\"configuration\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#configuration\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Configuration\"]}),(0,n.jsxs)(e.p,{children:[\"Add \",(0,n.jsx)(e.em,{children:(0,n.jsx)(e.code,{children:\"MultitenancyProvider\"})}),\" to your project in \",(0,n.jsx)(e.code,{children:\"config/providers.py\"}),\":\"]}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# config/providers.py\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` MultitenancyProvider\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"PROVIDERS \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Third Party Providers\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    MultitenancyProvider\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"Then you can publish the package resources (if needed) by doing:\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft package:publish multitenancy\n`})})}),(0,n.jsxs)(e.h3,{id:\"command-usage\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#command-usage\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Command Usage\"]}),(0,n.jsx)(e.p,{children:\"You'll get bunch of commands to manage tenants.\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Create a new tenant\"})}),(0,n.jsx)(e.p,{children:\"This will prompt few questions just provider answers and that's it.\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft tenancy:create\n`})})}),(0,n.jsxs)(e.p,{children:[\"This will also automatically generate new database connection based on your \",(0,n.jsx)(e.code,{children:\"default\"}),\" database connection from \",(0,n.jsx)(e.code,{children:\"config/database.py\"}),\".\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"List all tenants\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft tenancy:list\n`})})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Delete a tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# delete a tenant by database name\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:delete \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# or\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:delete \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1,tenant2\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Delete all tenants\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft tenancy:delete\n`})})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Migrate a tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:migrate \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# or\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:migrate \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1,tenant2\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Migrate all tenants\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft tenancy:migrate\n`})})}),(0,n.jsxs)(e.p,{children:[\"Similary you can use \",(0,n.jsx)(e.code,{children:\"tenancy:migrate:refresh\"}),\", \",(0,n.jsx)(e.code,{children:\"tenancy:migrate:reset\"}),\", \",(0,n.jsx)(e.code,{children:\"tenancy:migrate:status\"}),\" and \",(0,n.jsx)(e.code,{children:\"tenancy:migrate:rollback\"}),\" commands. All commands will take \",(0,n.jsx)(e.code,{children:\"--tenants\"}),\" option to specify tenants if you ever need.\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Seed a tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:seed \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# or\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:seed \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1,tenant2\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Seed all tenants\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft tenancy:seed\n`})})}),(0,n.jsxs)(e.h3,{id:\"using-tenancy-facade\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#using-tenancy-facade\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Using Tenancy Facade\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Create a new tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"facades \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenancy\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# creates a new tenant and returns instance of new Tenant\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"create\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  name\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  domain\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1.example.com'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  database\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Get tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"facades \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenancy\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# by id\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"get_tenant_by_id\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# by domain\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"get_tenant_by_domain\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1.example.com'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# by database name\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"get_tenant_by_database\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Delete tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"facades \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenancy\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"tenant \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" Tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"find\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"delete\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Connections\"})}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"facades \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenancy\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# setting tenant specific connection\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"tenant \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" Tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"find\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"set_connection\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# resetting to default connection\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"reset_connection\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"Event though above approach can be used to set tenant specific connection, and do tenant related tasks, it's recommended to use \",(0,n.jsx)(e.code,{children:\"TenantContext\"}),\" instead.\"]}),(0,n.jsxs)(e.h3,{id:\"using-tenant-context\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#using-tenant-context\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Using Tenant Context\"]}),(0,n.jsxs)(e.p,{children:[\"You might sometime need to get data from different tenant in your application or you might have to do some logic based on tenant. In this case you can use \",(0,n.jsx)(e.code,{children:\"TenantContext\"}),\" class to get tenant data.\"]}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"contexts \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` TenantContext\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"models\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Tenant \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenant\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"tenant \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" Tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"where\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'name'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'='\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"first\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"with\"}),\" TenantContext\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# do something with tenant1 data\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"You can also do all other tenant specific tasks like: \",(0,n.jsx)(e.code,{children:\"migrations\"}),\", \",(0,n.jsx)(e.code,{children:\"seeds\"}),\".\"]}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"contexts \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` TenantContext\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"models\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Tenant \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenant\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"tenant \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" Tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"where\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'name'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'='\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"first\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"with\"}),\" TenantContext\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# migrate the database\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"migrate\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"migrate_refresh\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"migrate_rollback\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"migrate_reset\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"migrate_status\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# seed the database\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"seed\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"final-step\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#final-step\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Final Step\"]}),(0,n.jsx)(e.p,{children:\"Now the multitenancy is almost ready to use. The final step is to make use of tenancy middleware. This middleware will be used to specify tenant in request on the fly. So, basically you have to attach this middleware to all the routes that are tenant aware.\"}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# config/routes.py\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Route\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"get\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"/\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"WelcomeController@show\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Route\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"get\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"/tenant-aware-routes\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"WelcomeController@show\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"middleware\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"multitenancy\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"In above example, \",(0,n.jsx)(e.code,{children:\"/tenant-aware-routes\"}),\" will be tenant aware. It means that if you have tenant setup and you are trying to access \",(0,n.jsx)(e.code,{children:\"/tenant-aware-routes\"}),\" then you will get tenant specific items from the database.\"]})]})}}var b=f;return w;})();\n;return Component;","toc":[{"value":"Masonite Multitenancy (WIP)","url":"#masonite-multitenancy-wip","depth":1},{"value":"Features","url":"#features","depth":3},{"value":"Installation","url":"#installation","depth":3},{"value":"Configuration","url":"#configuration","depth":3},{"value":"Command Usage","url":"#command-usage","depth":3},{"value":"Using Tenancy Facade","url":"#using-tenancy-facade","depth":3},{"value":"Using Tenant Context","url":"#using-tenant-context","depth":3},{"value":"Final Step","url":"#final-step","depth":3}],"frontMatter":{"readingTime":{"text":"5 min read","minutes":4.075,"time":244500,"words":815},"slug":"masonite-multitenancy","fileName":"masonite-multitenancy.md","title":"Masonite Multitenancy","date":"2022-07-17T00:00:00.000Z","tags":["masonite","multitenant","python"],"draft":false,"summary":"Multitenancy is a feature that allows you to have multiple tenants in your application. This is useful for things like a company having multiple websites, or a company having multiple apps."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.97,"time":58200,"words":194},"slug":["default"],"fileName":"default.md","name":"Yubaraj Shrestha","avatar":"/static/images/avatar.jpg","occupation":"Python Engineer","company":null,"email":"yubaraj@pypackage.com","twitter":"https://twitter.com/meyubaraj","linkedin":"https://www.linkedin.com/in/meyubaraj","github":"https://github.com/yubarajshrestha","date":null}],"prev":{"title":"Masonite Sentry","date":"2022-07-12T00:00:00.000Z","tags":["masonite","sentry","python"],"draft":false,"summary":"Sentry SDK implementation for Masonite Apps.","slug":"masonite-sentry"},"next":{"title":"Masonite Instant Articles","date":"2022-07-17T00:00:00.000Z","tags":["masonite","instant-articles","instant","articles","python"],"draft":false,"summary":"This helps you generate facebooks instant articles and also regular feeds with enough customizations you might need.","slug":"masonite-instant-articles"}},"__N_SSG":true}