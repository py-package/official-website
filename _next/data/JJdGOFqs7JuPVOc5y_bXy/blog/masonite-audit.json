{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var r=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=a=>l(a,\"__esModule\",{value:!0});var u=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=>{i(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},g=(a,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of h(s))!m.call(a,n)&&n!==\"default\"&&l(a,n,{get:()=>s[n],enumerable:!(c=d(s,n))||c.enumerable});return a},k=a=>g(i(l(a!=null?r(p(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((j,t)=>{t.exports=_jsx_runtime});var w={};N(w,{default:()=>b,frontmatter:()=>y});var e=k(o()),y={title:\"Masonite Audit\",date:\"2022-10-10\",tags:[\"masonite\",\"audit\",\"python\"],draft:!1,summary:\"Keep track of all your model changes with ease.\"};function f(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",pre:\"pre\",code:\"code\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(\"p\",{align:\"center\",children:(0,e.jsx)(\"img\",{src:\"https://banners.beyondco.de/Masonite%20Audit.png?theme=light&packageManager=pip+install&packageName=masonite-audit&pattern=charlieBrown&style=style_2&description=Keep+track+of+all+your+model+changes+with+ease.&md=1&showWatermark=1&fontSize=100px&images=adjustments&widths=50&heights=50\"})}),(0,e.jsxs)(n.h2,{id:\"getting-started\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#getting-started\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Getting Started\"]}),(0,e.jsx)(n.p,{children:\"Install the package using pip:\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"pip \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),` masonite-audit\n`]})})}),(0,e.jsxs)(n.p,{children:[\"Add AuditProvider to your project in \",(0,e.jsx)(n.code,{children:\"config/providers.py\"}),\":\"]}),(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# config/providers.py\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" masonite_audit \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),` AuditProvider\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"PROVIDERS \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Third Party Providers\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    AuditProvider\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"Publish the package configuration files.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`python craft package:publish masonite-audit\n`})})}),(0,e.jsxs)(n.p,{children:[\"This will add migrations and other \",(0,e.jsx)(n.code,{children:\"masonite-audit\"}),\" related configuration to your project. Run your migrations to create the related database tables.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`python craft migrate\n`})})}),(0,e.jsxs)(n.p,{children:[\"Finally, inherit \",(0,e.jsx)(n.code,{children:\"Audit\"}),\" mixin into all the models for which you need audit logging.\"]}),(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" masonite_audit\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"mixins \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),` Audit\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"YourModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"Audit\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pass\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"If you want to get the audit history for a model, you can use the \",(0,e.jsx)(n.code,{children:\"history\"}),\" method:\"]}),(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" User\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"find\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"history\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"In order to rollback to previous versions of a model, you can use the \",(0,e.jsx)(n.code,{children:\"rollback\"}),\" method:\"]}),(0,e.jsx)(n.pre,{className:\"language-python\",children:(0,e.jsxs)(n.code,{className:\"language-python code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" User\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"find\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"rollback\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# to rollback to previous version\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# or\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"rollback\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"step\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"4\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# to rollback to version 4\"}),`\n`]})]})})]})}}var b=f;return w;})();\n;return Component;","toc":[{"value":"Getting Started","url":"#getting-started","depth":2}],"frontMatter":{"readingTime":{"text":"2 min read","minutes":1.205,"time":72300,"words":241},"slug":"masonite-audit","fileName":"masonite-audit.md","title":"Masonite Audit","date":"2022-10-10T00:00:00.000Z","tags":["masonite","audit","python"],"draft":false,"summary":"Keep track of all your model changes with ease."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.97,"time":58200,"words":194},"slug":["default"],"fileName":"default.md","name":"Yubaraj Shrestha","avatar":"/static/images/avatar.jpg","occupation":"Python Engineer","company":null,"email":"yubaraj@pypackage.com","twitter":"https://twitter.com/meyubaraj","linkedin":"https://www.linkedin.com/in/meyubaraj","github":"https://github.com/yubarajshrestha","date":null}],"prev":{"title":"Masonite Localization","date":"2022-10-10T00:00:00.000Z","tags":["masonite","localization","multi-language","python"],"draft":false,"summary":"Add multi-language support in your application.","slug":"masonite-localization"},"next":{"title":"Masonite Filemanager","date":"2022-10-25T00:00:00.000Z","tags":["masonite","filemanager","python"],"draft":false,"summary":"A simple yet powerful file management solution for your masonite application.","slug":"masonite-filemanager"}},"__N_SSG":true}