<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>Masonite Multitenancy</title><meta name="robots" content="follow, index"/><meta name="description" content="Multitenancy is a feature that allows you to have multiple tenants in your application. This is useful for things like a company having multiple websites, or a company having multiple apps."/><meta property="og:url" content="https://pypackage.com/blog/masonite-multitenancy"/><meta property="og:type" content="article"/><meta property="og:site_name" content="PyPackage"/><meta property="og:description" content="Multitenancy is a feature that allows you to have multiple tenants in your application. This is useful for things like a company having multiple websites, or a company having multiple apps."/><meta property="og:title" content="Masonite Multitenancy"/><meta property="og:image" content="https://pypackage.com/static/images/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/pypackage"/><meta name="twitter:title" content="Masonite Multitenancy"/><meta name="twitter:description" content="Multitenancy is a feature that allows you to have multiple tenants in your application. This is useful for things like a company having multiple websites, or a company having multiple apps."/><meta name="twitter:image" content="https://pypackage.com/static/images/twitter-card.png"/><link rel="canonical" href="https://pypackage.com/blog/masonite-multitenancy"/><meta property="article:published_time" content="2022-07-17T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://pypackage.com/blog/masonite-multitenancy"
  },
  "headline": "Masonite Multitenancy",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://pypackage.com/static/images/twitter-card.png"
    }
  ],
  "datePublished": "2022-07-17T00:00:00.000Z",
  "dateModified": "2022-07-17T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Yubaraj Shrestha"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Yubaraj Shrestha",
    "logo": {
      "@type": "ImageObject",
      "url": "https://pypackage.com/static/images/logo.png"
    }
  },
  "description": "Multitenancy is a feature that allows you to have multiple tenants in your application. This is useful for things like a company having multiple websites, or a company having multiple apps."
}</script><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="https://pypackage.com/_next/static/css/2c0b4944cb19d588.css" as="style"/><link rel="stylesheet" href="https://pypackage.com/_next/static/css/2c0b4944cb19d588.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://pypackage.com/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="https://pypackage.com/_next/static/chunks/webpack-9ee361a46f059dbc.js" defer=""></script><script src="https://pypackage.com/_next/static/chunks/main-ca5bc93ff8440519.js" defer=""></script><script src="https://pypackage.com/_next/static/chunks/pages/_app-1b43df0a5a2b6982.js" defer=""></script><script src="https://pypackage.com/_next/static/chunks/837-8a9e9591d89550b6.js" defer=""></script><script src="https://pypackage.com/_next/static/chunks/596-5eb7a504e54d5b7f.js" defer=""></script><script src="https://pypackage.com/_next/static/chunks/pages/blog/%5B...slug%5D-ed34fb2ea6e6ef04.js" defer=""></script><script src="https://pypackage.com/_next/static/aUbmYmKpIpzT8Kae10vzz/_buildManifest.js" defer=""></script><script src="https://pypackage.com/_next/static/aUbmYmKpIpzT8Kae10vzz/_ssgManifest.js" defer=""></script><script src="https://pypackage.com/_next/static/aUbmYmKpIpzT8Kae10vzz/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="PyPackage" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="106px" height="64px" viewBox="0 0 884 376"><path d="M360 38.7c-.8.3-1.8 1.1-2.2 1.7-.4.6-.8 23.5-.8 50.8V141h-20v3.9c0 7.7-9 7.1 108 7.1s108 .6 108-7.1V141h-20V91.2c0-29.5-.4-50.3-1-51.2-.8-1.3-11.6-1.5-85.7-1.7-46.6-.1-85.5.1-86.3.4zm86 3.8c0 .8-.4 1.5-.9 1.5-1.3 0-2.2-1.6-1.4-2.4 1.1-1.1 2.3-.6 2.3.9zm80 48V134H364V47h162v43.5zm-69 56c0 1.3-1.7 1.5-11.7 1.3-8.2-.2-11.8-.7-12.1-1.6-.3-.9 2.5-1.2 11.7-1.2 10.2 0 12.1.2 12.1 1.5z"></path><path d="M370 53.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 53.5c0 1.1 1.1 1.5 4 1.5s4-.4 4-1.5-1.1-1.5-4-1.5-4 .4-4 1.5zM370 58.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 58.5c0 1.2 1.8 1.5 10.5 1.5s10.5-.3 10.5-1.5-1.8-1.5-10.5-1.5-10.5.3-10.5 1.5zM370 63c0 .5.7 1 1.5 1s1.5-.5 1.5-1c0-.6-.7-1-1.5-1s-1.5.4-1.5 1zM375 63c0 .6 5.3 1 14 1s14-.4 14-1-5.3-1-14-1-14 .4-14 1zM370 67.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 67.5c0 1.2 1.8 1.5 10.5 1.5s10.5-.3 10.5-1.5-1.8-1.5-10.5-1.5-10.5.3-10.5 1.5zM370 72.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 72.5c0 1.2 1.8 1.5 10.5 1.5s10.5-.3 10.5-1.5-1.8-1.5-10.5-1.5-10.5.3-10.5 1.5zM370 77.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 77.5c0 1.1 1.1 1.5 4 1.5s4-.4 4-1.5-1.1-1.5-4-1.5-4 .4-4 1.5zM370 82.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 82.5c0 1.2 1.4 1.5 7 1.5s7-.3 7-1.5-1.4-1.5-7-1.5-7 .3-7 1.5zM370 87.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 87.5c0 1.1 1.1 1.5 4 1.5s4-.4 4-1.5-1.1-1.5-4-1.5-4 .4-4 1.5zM385 87.5c0 1.3 2.4 1.5 15.5 1.5s15.5-.2 15.5-1.5-2.4-1.5-15.5-1.5-15.5.2-15.5 1.5zM420 87.5c0 1.1 1.1 1.5 4 1.5s4-.4 4-1.5-1.1-1.5-4-1.5-4 .4-4 1.5zM370 92.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 92.5c0 1.1 1.1 1.5 4 1.5s4-.4 4-1.5-1.1-1.5-4-1.5-4 .4-4 1.5zM385 92.5c0 1.3 3.3 1.5 24 1.5s24-.2 24-1.5-3.3-1.5-24-1.5-24 .2-24 1.5zM437 92.5c0 1.1 1.1 1.5 4 1.5s4-.4 4-1.5-1.1-1.5-4-1.5-4 .4-4 1.5zM370 97.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 97.5c0 1.1 1.1 1.5 4 1.5s4-.4 4-1.5-1.1-1.5-4-1.5-4 .4-4 1.5zM385 97.5c0 1.3 4.4 1.5 33.5 1.5s33.5-.2 33.5-1.5-4.4-1.5-33.5-1.5-33.5.2-33.5 1.5zM454 97.5c0 1.1 1.1 1.5 4 1.5s4-.4 4-1.5-1.1-1.5-4-1.5-4 .4-4 1.5zM370 102.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 102.5c0 1.3 4.3 1.5 33 1.5s33-.2 33-1.5-4.3-1.5-33-1.5-33 .2-33 1.5zM370 107.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 107.5c0 1.1 1.1 1.5 4 1.5s4-.4 4-1.5-1.1-1.5-4-1.5-4 .4-4 1.5zM385 107.5c0 1.3 3.8 1.5 28 1.5s28-.2 28-1.5-3.8-1.5-28-1.5-28 .2-28 1.5zM370 112.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 112.5c0 1.3 2.9 1.5 20.5 1.5s20.5-.2 20.5-1.5-2.9-1.5-20.5-1.5-20.5.2-20.5 1.5zM370 117.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 117.5c0 1.3 2.6 1.5 17 1.5s17-.2 17-1.5-2.6-1.5-17-1.5-17 .2-17 1.5zM413 117.5c0 1.1 1.1 1.5 4 1.5s4-.4 4-1.5-1.1-1.5-4-1.5-4 .4-4 1.5zM370 122.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 122.5c0 1.2 1.6 1.5 8.5 1.5s8.5-.3 8.5-1.5-1.6-1.5-8.5-1.5-8.5.3-8.5 1.5zM370 127.5c0 .8.7 1.5 1.5 1.5s1.5-.7 1.5-1.5-.7-1.5-1.5-1.5-1.5.7-1.5 1.5zM375 127.5c0 1.2 1.4 1.5 7 1.5s7-.3 7-1.5-1.4-1.5-7-1.5-7 .3-7 1.5zM585 191.5v9.5h285v-19H585v9.5zM20 193.5v9.5h285v-19H20v9.5zM491 249.9c0 .5-2.2 19.1-5 41.4-2.7 22.3-5 41.2-5 42.1 0 1.4 1.4 1.6 8.9 1.6h8.8l1.2-10.8c1.7-14.6 1.9-15.4 4.4-15 1.5.2 3 2.9 6.4 11.8 2.5 6.3 5.2 12.1 6.1 12.7 1.5 1.2 19.2 1.9 19.2.8 0-1.3-13.3-31.6-14.2-32.1-.5-.4.6-2.3 2.5-4.3 4.4-4.5 17.7-21.3 17.7-22.4 0-1-15.4-.9-18.3.2-1.3.5-5.3 4.9-8.9 9.8-6.9 9.3-9.4 12-10.5 10.9-.6-.5 1.8-23.9 4.4-43.4l.6-4.2h-9.2c-5 0-9.1.4-9.1.9zM185.6 290.7c-2.6 21.9-5 40.8-5.3 42-.5 2.3-.4 2.3 9.1 2.3 11.1 0 9.9 1.5 11.6-14 1.7-15 1.1-14 7.8-14 12.5 0 22.5-3.2 29-9.4 5.4-5 7.5-10 8-19.4.5-9.8-1.1-15.2-6.1-20-5.7-5.5-10.1-6.5-30.7-7l-18.6-.4-4.8 39.9zm38.5-21.8c5.1 5.1 3.7 16-2.7 21-2.1 1.7-4.1 2.1-9.5 2.1-6.1 0-6.9-.2-6.9-1.9 0-2 1.6-15 2.6-20.9l.5-3.2h6.5c5.9 0 6.8.3 9.5 2.9zM315.6 252.2c-.6 1.9-9.6 77.9-9.6 80.5 0 2.2.3 2.3 9.3 2.3h9.4l1.2-11.3c2.1-18.1 1.3-16.7 8.5-16.7 7.1 0 18.1-2.2 22.4-4.4 8.8-4.6 14.4-14.7 14.6-26.5.1-6.4-.3-8.5-2.5-12.6-3-6-8.9-10-16.8-11.5-8-1.5-36.1-1.3-36.5.2zm33.5 16.7c2.4 2.5 2.9 3.7 2.9 8.1 0 6.6-2.1 11.5-5.9 13.4-3.8 2-16.1 2.2-16.1.3 0-.6.7-5.9 1.5-11.7.8-5.8 1.5-11.1 1.5-11.8 0-.8 2-1.2 6.6-1.2 5.9 0 6.8.3 9.5 2.9zM398 275.6c-17.9 4.9-28.9 19.6-29.2 38.7 0 6.3.4 8.6 2.4 12.5 5.5 11 19 12 28.6 2.1l3.2-3.3v3.1c0 4.8 2.2 6.3 9.4 6.3h6.3l3.2-26.8c4.2-34 4.2-31.3.9-32.3-6.2-1.7-19.3-1.9-24.8-.3zm7.4 20.1c-1.5 11-3.6 16.9-7.5 21.6-6.2 7.5-11.5 3.5-10.7-8.1.9-12.2 8.5-21.9 17.4-22.1 2.1-.1 2.1 0 .8 8.6zM456.5 274.9c-15.6 2.6-26.6 17.2-26.6 35.5 0 13.3 5.7 21.8 16.5 24.7 8.2 2.2 19.4-.7 26.6-6.9 3.3-2.8 3.4-3.1 2-5.7-.8-1.5-2.6-3.5-3.9-4.3-2.2-1.5-2.7-1.5-7.2 1.1-6.3 3.5-9.3 3.4-13-.2-2.5-2.6-2.9-3.7-2.9-8.8 0-7.5 2.2-14.1 6.1-18 3.6-3.7 6.6-4.4 11.6-2.7 5.6 2 6.5 1.8 10.8-2.6l3.8-3.9-3.2-3c-4.7-4.4-12.9-6.5-20.6-5.2z"></path><path d="M568 275.6c-17.9 4.9-28.9 19.6-29.2 38.7 0 6.3.4 8.6 2.4 12.5 5.5 11 19 12 28.6 2.1l3.2-3.3v3.1c0 4.8 2.2 6.3 9.4 6.3h6.3l3.2-26.8c4.2-34 4.2-31.3.9-32.3-6.2-1.7-19.3-1.9-24.8-.3zm7.4 20.1c-1.5 11-3.6 16.9-7.5 21.6-6.2 7.5-11.5 3.5-10.7-8.1.9-12.2 8.5-21.9 17.4-22.1 2.1-.1 2.1 0 .8 8.6zM622.3 275c-11.6 2.4-19.3 11.6-19.3 23.2 0 6 2.9 12.9 6.5 15.2 5.3 3.5 13.9 4 20.5 1.2 1.3-.5 1.5.1 1.2 3.4l-.4 4h-7.7c-8.6 0-18.3 2.1-22.1 4.9-10.1 7.3-8.9 19.4 2.5 25.1 4.4 2.2 6.2 2.5 16 2.5 10 0 11.5-.3 16.1-2.7 6.7-3.5 11-8.8 12.5-15.3 1-4.5.9-5.8-1.5-12.6-1.4-4.2-2.6-8.6-2.6-9.8 0-1.2 1.4-5.4 3-9.3 1.7-4 3-8.8 3-11.2 0-3.9.3-4.3 3.4-5.4 2.4-.9 3.8-2.2 4.5-4.4 2.3-6.6 2.1-6.8-8-6.8-5 0-9.8-.4-10.7-.9-2.7-1.4-12.3-2-16.9-1.1zm8.5 12.6c1.7 1.2 2.2 2.5 2.2 6.2 0 5.7-1.6 9.1-5.1 11.1-2.4 1.3-2.9 1.3-5.3-.2-2.3-1.5-2.6-2.4-2.6-7.3 0-4.8.4-5.9 2.9-8.5 3.4-3.3 4.7-3.5 7.9-1.3zm-.4 45c3.5 1.3.4 7.6-4.6 9.3-5.3 1.9-9.6 1.4-12.4-1.4-2.1-2.1-2.3-2.8-1.4-4.5.6-1.2 2.1-2.5 3.3-3 2.5-1 12.8-1.3 15.1-.4zM684.3 275c-10 2-18.6 9-23.1 18.8-3.4 7.6-4.3 20.1-1.7 26.8 3.9 10.2 10.9 14.9 22.5 14.8 9.6 0 16.6-2.4 22.4-7.5l4.6-4.1-2.6-3.4c-3.2-4.2-6.4-4.4-12.5-.9-8.9 5-17.9 1.8-17.9-6.5 0-1.9.8-2.2 9.9-3.6 15.5-2.3 24.1-9.1 24.1-18.9 0-11-11.9-18.2-25.7-15.5zm8 13.5c3.6 3.5-1.9 8.2-11.5 10-3.4.7-3.6.6-3.1-1.5.3-1.2 2.3-4 4.3-6.1 4-4.2 7.7-5.1 10.3-2.4zM248.5 277c.3 1.1 3.7 13.3 7.5 27.2l6.9 25.1-6.5 11.3c-3.5 6.3-6.4 11.8-6.4 12.4 0 .6 3.1 1 7.4 1 5.6 0 7.9-.4 9.4-1.7 1.6-1.4 40.2-75.2 40.2-76.9 0-.2-3.6-.4-7.9-.4-6.1 0-8.3.4-9.8 1.7-1.1 1-4.8 8.5-8.3 16.6-3.4 8.1-6.5 14.5-6.8 14.3-.2-.3-1.7-6.8-3.3-14.6-1.6-7.7-3.3-14.9-3.9-16-.9-1.8-2.1-2-10.1-2-8.6 0-9 .1-8.4 2z"></path></svg></div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">Projects</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2022-07-17T00:00:00.000Z">Sunday, July 17, 2022</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Masonite Multitenancy</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img src="/static/images/avatar.jpg" width="38px" height="38px" alt="avatar" class="h-10 w-10 rounded-full"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Yubaraj Shrestha</dd><dt class="sr-only">Twitter</dt><dd><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/meyubaraj" class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400">@meyubaraj</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><p align="center"><img src="https://banners.beyondco.de/Masonite%20Multitenancy.png?theme=light&amp;packageManager=pip+install&amp;packageName=masonite-multitenancy&amp;pattern=charlieBrown&amp;style=style_2&amp;description=Multitenancy+package+for+masonite.&amp;md=1&amp;showWatermark=1&amp;fontSize=100px&amp;images=adjustments&amp;widths=50&amp;heights=50"/></p><h1 id="masonite-multitenancy-wip"><a href="#masonite-multitenancy-wip" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Masonite Multitenancy (WIP)</h1><p>Multitenancy package for Masonite!</p><p>Multitenancy is a feature that allows you to have multiple tenants in your application. This is useful for things like a company having multiple websites, or a company having multiple apps.</p><h3 id="features"><a href="#features" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Features</h3><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Create a new tenant (with domain)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Tenant specific configurations</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Tenant specific migrations and seeders</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Tenant middleware to specify tenant in request on the fly</li></ul><h3 id="installation"><a href="#installation" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Installation</h3><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">pip <span class="token function">install</span> masonite-multitenancy
</span></code></pre></div><h3 id="configuration"><a href="#configuration" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Configuration</h3><p>Add <em><code>MultitenancyProvider</code></em> to your project in <code>config/providers.py</code>:</p><div class="relative"><pre><code class="code-highlight language-python"><span class="code-line"><span class="token comment"># config/providers.py</span>
</span><span class="code-line"><span class="token comment"># ...</span>
</span><span class="code-line"><span class="token keyword">from</span> multitenancy <span class="token keyword">import</span> MultitenancyProvider
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ...</span>
</span><span class="code-line">PROVIDERS <span class="token operator">=</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token comment"># ...</span>
</span><span class="code-line">    <span class="token comment"># Third Party Providers</span>
</span><span class="code-line">    MultitenancyProvider<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token comment"># ...</span>
</span><span class="code-line"><span class="token punctuation">]</span>
</span></code></pre></div><p>Then you can publish the package resources (if needed) by doing:</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">python craft package:publish multitenancy
</span></code></pre></div><h3 id="command-usage"><a href="#command-usage" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Command Usage</h3><p>You&#x27;ll get bunch of commands to manage tenants.</p><p><strong>Create a new tenant</strong></p><p>This will prompt few questions just provider answers and that&#x27;s it.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">python craft tenancy:create
</span></code></pre></div><p>This will also automatically generate new database connection based on your <code>default</code> database connection from <code>config/database.py</code>.</p><p><strong>List all tenants</strong></p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">python craft tenancy:list
</span></code></pre></div><p><strong>Delete a tenant</strong></p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># delete a tenant by database name</span>
</span><span class="code-line">python craft tenancy:delete <span class="token parameter variable">--tenants</span><span class="token operator">=</span>tenant1
</span><span class="code-line"><span class="token comment"># or</span>
</span><span class="code-line">python craft tenancy:delete <span class="token parameter variable">--tenants</span><span class="token operator">=</span>tenant1,tenant2
</span></code></pre></div><p><strong>Delete all tenants</strong></p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">python craft tenancy:delete
</span></code></pre></div><p><strong>Migrate a tenant</strong></p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">python craft tenancy:migrate <span class="token parameter variable">--tenants</span><span class="token operator">=</span>tenant1
</span><span class="code-line"><span class="token comment"># or</span>
</span><span class="code-line">python craft tenancy:migrate <span class="token parameter variable">--tenants</span><span class="token operator">=</span>tenant1,tenant2
</span></code></pre></div><p><strong>Migrate all tenants</strong></p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">python craft tenancy:migrate
</span></code></pre></div><p>Similary you can use <code>tenancy:migrate:refresh</code>, <code>tenancy:migrate:reset</code>, <code>tenancy:migrate:status</code> and <code>tenancy:migrate:rollback</code> commands. All commands will take <code>--tenants</code> option to specify tenants if you ever need.</p><p><strong>Seed a tenant</strong></p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">python craft tenancy:seed <span class="token parameter variable">--tenants</span><span class="token operator">=</span>tenant1
</span><span class="code-line"><span class="token comment"># or</span>
</span><span class="code-line">python craft tenancy:seed <span class="token parameter variable">--tenants</span><span class="token operator">=</span>tenant1,tenant2
</span></code></pre></div><p><strong>Seed all tenants</strong></p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">python craft tenancy:seed
</span></code></pre></div><h3 id="using-tenancy-facade"><a href="#using-tenancy-facade" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Using Tenancy Facade</h3><p><strong>Create a new tenant</strong></p><div class="relative"><pre><code class="code-highlight language-python"><span class="code-line"><span class="token keyword">from</span> multitenancy<span class="token punctuation">.</span>facades <span class="token keyword">import</span> Tenancy
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># creates a new tenant and returns instance of new Tenant</span>
</span><span class="code-line">Tenancy<span class="token punctuation">.</span>create<span class="token punctuation">(</span>
</span><span class="code-line">  name<span class="token operator">=</span><span class="token string">&#x27;tenant1&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  domain<span class="token operator">=</span><span class="token string">&#x27;tenant1.example.com&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  database<span class="token operator">=</span><span class="token string">&#x27;tenant1&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span></code></pre></div><p><strong>Get tenant</strong></p><div class="relative"><pre><code class="code-highlight language-python"><span class="code-line"><span class="token keyword">from</span> multitenancy<span class="token punctuation">.</span>facades <span class="token keyword">import</span> Tenancy
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># by id</span>
</span><span class="code-line">Tenancy<span class="token punctuation">.</span>get_tenant_by_id<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># by domain</span>
</span><span class="code-line">Tenancy<span class="token punctuation">.</span>get_tenant_by_domain<span class="token punctuation">(</span><span class="token string">&#x27;tenant1.example.com&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># by database name</span>
</span><span class="code-line">Tenancy<span class="token punctuation">.</span>get_tenant_by_database<span class="token punctuation">(</span><span class="token string">&#x27;tenant1&#x27;</span><span class="token punctuation">)</span>
</span></code></pre></div><p><strong>Delete tenant</strong></p><div class="relative"><pre><code class="code-highlight language-python"><span class="code-line"><span class="token keyword">from</span> multitenancy<span class="token punctuation">.</span>facades <span class="token keyword">import</span> Tenancy
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line">tenant <span class="token operator">=</span> Tenant<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">Tenancy<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>tenant<span class="token punctuation">)</span>
</span></code></pre></div><p><strong>Connections</strong></p><div class="relative"><pre><code class="code-highlight language-python"><span class="code-line"><span class="token keyword">from</span> multitenancy<span class="token punctuation">.</span>facades <span class="token keyword">import</span> Tenancy
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># setting tenant specific connection</span>
</span><span class="code-line">tenant <span class="token operator">=</span> Tenant<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">Tenancy<span class="token punctuation">.</span>set_connection<span class="token punctuation">(</span>tenant<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># resetting to default connection</span>
</span><span class="code-line">Tenancy<span class="token punctuation">.</span>reset_connection<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code></pre></div><p>Event though above approach can be used to set tenant specific connection, and do tenant related tasks, it&#x27;s recommended to use <code>TenantContext</code> instead.</p><h3 id="using-tenant-context"><a href="#using-tenant-context" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Using Tenant Context</h3><p>You might sometime need to get data from different tenant in your application or you might have to do some logic based on tenant. In this case you can use <code>TenantContext</code> class to get tenant data.</p><div class="relative"><pre><code class="code-highlight language-python"><span class="code-line"><span class="token keyword">from</span> multitenancy<span class="token punctuation">.</span>contexts <span class="token keyword">import</span> TenantContext
</span><span class="code-line"><span class="token keyword">from</span> multitenancy<span class="token punctuation">.</span>models<span class="token punctuation">.</span>Tenant <span class="token keyword">import</span> Tenant
</span><span class="code-line">
</span><span class="code-line">tenant <span class="token operator">=</span> Tenant<span class="token punctuation">.</span>where<span class="token punctuation">(</span><span class="token string">&#x27;name&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;=&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;tenant1&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">with</span> TenantContext<span class="token punctuation">(</span>tenant<span class="token operator">=</span>tenant<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token comment"># do something with tenant1 data</span>
</span><span class="code-line">    <span class="token comment"># ...</span>
</span></code></pre></div><p>You can also do all other tenant specific tasks like: <code>migrations</code>, <code>seeds</code>.</p><div class="relative"><pre><code class="code-highlight language-python"><span class="code-line"><span class="token keyword">from</span> multitenancy<span class="token punctuation">.</span>contexts <span class="token keyword">import</span> TenantContext
</span><span class="code-line"><span class="token keyword">from</span> multitenancy<span class="token punctuation">.</span>models<span class="token punctuation">.</span>Tenant <span class="token keyword">import</span> Tenant
</span><span class="code-line">
</span><span class="code-line">tenant <span class="token operator">=</span> Tenant<span class="token punctuation">.</span>where<span class="token punctuation">(</span><span class="token string">&#x27;name&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;=&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;tenant1&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">with</span> TenantContext<span class="token punctuation">(</span>tenant<span class="token operator">=</span>tenant<span class="token punctuation">)</span> <span class="token keyword">as</span> ctx<span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token comment"># migrate the database</span>
</span><span class="code-line">    ctx<span class="token punctuation">.</span>migrate<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    ctx<span class="token punctuation">.</span>migrate_refresh<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    ctx<span class="token punctuation">.</span>migrate_rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    ctx<span class="token punctuation">.</span>migrate_reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    ctx<span class="token punctuation">.</span>migrate_status<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment"># seed the database</span>
</span><span class="code-line">    ctx<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code></pre></div><h3 id="final-step"><a href="#final-step" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Final Step</h3><p>Now the multitenancy is almost ready to use. The final step is to make use of tenancy middleware. This middleware will be used to specify tenant in request on the fly. So, basically you have to attach this middleware to all the routes that are tenant aware.</p><div class="relative"><pre><code class="code-highlight language-python"><span class="code-line"><span class="token comment"># config/routes.py</span>
</span><span class="code-line"><span class="token comment"># ...</span>
</span><span class="code-line">
</span><span class="code-line">Route<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;WelcomeController@show&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">Route<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;/tenant-aware-routes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;WelcomeController@show&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>middleware<span class="token punctuation">(</span><span class="token string">&quot;multitenancy&quot;</span><span class="token punctuation">)</span>
</span></code></pre></div><p>In above example, <code>/tenant-aware-routes</code> will be tenant aware. It means that if you have tenant setup and you are trying to access <code>/tenant-aware-routes</code> then you will get tenant specific items from the database.</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fpypackage.com%2Fblog%2Fmasonite-multitenancy">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/py-package/masonite-multitenancy#readme">View on GitHub</a></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/masonite">masonite</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/multitenant">multitenant</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/python">python</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/masonite-sentry">Masonite Sentry</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/masonite-instant-articles">Masonite Instant Articles</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:info@pypackage.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/py-package"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/pypackage"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Yubaraj Shrestha</div><div> • </div><div>© 2022</div><div> • </div><a href="/">PyPackage</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400">Thanks to<!-- --> <a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">@timlrx</a> for this template.</div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var r=Object.create;var t=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var l=a=\u003et(a,\"__esModule\",{value:!0});var u=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{l(a);for(var c in s)t(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let e of h(s))!m.call(a,e)\u0026\u0026e!==\"default\"\u0026\u0026t(a,e,{get:()=\u003es[e],enumerable:!(c=d(s,e))||c.enumerable});return a},g=a=\u003ek(l(t(a!=null?r(p(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((T,i)=\u003e{i.exports=_jsx_runtime});var w={};N(w,{default:()=\u003eb,frontmatter:()=\u003ey});var n=g(o()),y={title:\"Masonite Multitenancy\",date:\"2022-07-17\",tags:[\"masonite\",\"multitenant\",\"python\"],draft:!1,summary:\"Multitenancy is a feature that allows you to have multiple tenants in your application. This is useful for things like a company having multiple websites, or a company having multiple apps.\"};function f(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({h1:\"h1\",a:\"a\",span:\"span\",p:\"p\",h3:\"h3\",ul:\"ul\",li:\"li\",input:\"input\",pre:\"pre\",code:\"code\",em:\"em\",strong:\"strong\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(\"p\",{align:\"center\",children:(0,n.jsx)(\"img\",{src:\"https://banners.beyondco.de/Masonite%20Multitenancy.png?theme=light\u0026packageManager=pip+install\u0026packageName=masonite-multitenancy\u0026pattern=charlieBrown\u0026style=style_2\u0026description=Multitenancy+package+for+masonite.\u0026md=1\u0026showWatermark=1\u0026fontSize=100px\u0026images=adjustments\u0026widths=50\u0026heights=50\"})}),(0,n.jsxs)(e.h1,{id:\"masonite-multitenancy-wip\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#masonite-multitenancy-wip\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Masonite Multitenancy (WIP)\"]}),(0,n.jsx)(e.p,{children:\"Multitenancy package for Masonite!\"}),(0,n.jsx)(e.p,{children:\"Multitenancy is a feature that allows you to have multiple tenants in your application. This is useful for things like a company having multiple websites, or a company having multiple apps.\"}),(0,n.jsxs)(e.h3,{id:\"features\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#features\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Features\"]}),(0,n.jsxs)(e.ul,{className:\"contains-task-list\",children:[(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{checked:!0,disabled:!0,type:\"checkbox\"}),\" \",\"Create a new tenant (with domain)\"]}),(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{checked:!0,disabled:!0,type:\"checkbox\"}),\" \",\"Tenant specific configurations\"]}),(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{checked:!0,disabled:!0,type:\"checkbox\"}),\" \",\"Tenant specific migrations and seeders\"]}),(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{checked:!0,disabled:!0,type:\"checkbox\"}),\" \",\"Tenant middleware to specify tenant in request on the fly\"]})]}),(0,n.jsxs)(e.h3,{id:\"installation\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#installation\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Installation\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"pip \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),` masonite-multitenancy\n`]})})}),(0,n.jsxs)(e.h3,{id:\"configuration\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#configuration\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Configuration\"]}),(0,n.jsxs)(e.p,{children:[\"Add \",(0,n.jsx)(e.em,{children:(0,n.jsx)(e.code,{children:\"MultitenancyProvider\"})}),\" to your project in \",(0,n.jsx)(e.code,{children:\"config/providers.py\"}),\":\"]}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# config/providers.py\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` MultitenancyProvider\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"PROVIDERS \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Third Party Providers\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    MultitenancyProvider\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"Then you can publish the package resources (if needed) by doing:\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft package:publish multitenancy\n`})})}),(0,n.jsxs)(e.h3,{id:\"command-usage\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#command-usage\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Command Usage\"]}),(0,n.jsx)(e.p,{children:\"You'll get bunch of commands to manage tenants.\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Create a new tenant\"})}),(0,n.jsx)(e.p,{children:\"This will prompt few questions just provider answers and that's it.\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft tenancy:create\n`})})}),(0,n.jsxs)(e.p,{children:[\"This will also automatically generate new database connection based on your \",(0,n.jsx)(e.code,{children:\"default\"}),\" database connection from \",(0,n.jsx)(e.code,{children:\"config/database.py\"}),\".\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"List all tenants\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft tenancy:list\n`})})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Delete a tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# delete a tenant by database name\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:delete \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# or\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:delete \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1,tenant2\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Delete all tenants\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft tenancy:delete\n`})})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Migrate a tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:migrate \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# or\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:migrate \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1,tenant2\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Migrate all tenants\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft tenancy:migrate\n`})})}),(0,n.jsxs)(e.p,{children:[\"Similary you can use \",(0,n.jsx)(e.code,{children:\"tenancy:migrate:refresh\"}),\", \",(0,n.jsx)(e.code,{children:\"tenancy:migrate:reset\"}),\", \",(0,n.jsx)(e.code,{children:\"tenancy:migrate:status\"}),\" and \",(0,n.jsx)(e.code,{children:\"tenancy:migrate:rollback\"}),\" commands. All commands will take \",(0,n.jsx)(e.code,{children:\"--tenants\"}),\" option to specify tenants if you ever need.\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Seed a tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:seed \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# or\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"python craft tenancy:seed \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--tenants\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`tenant1,tenant2\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Seed all tenants\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`python craft tenancy:seed\n`})})}),(0,n.jsxs)(e.h3,{id:\"using-tenancy-facade\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#using-tenancy-facade\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Using Tenancy Facade\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Create a new tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"facades \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenancy\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# creates a new tenant and returns instance of new Tenant\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"create\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  name\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  domain\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1.example.com'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  database\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Get tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"facades \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenancy\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# by id\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"get_tenant_by_id\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# by domain\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"get_tenant_by_domain\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1.example.com'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# by database name\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"get_tenant_by_database\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Delete tenant\"})}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"facades \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenancy\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"tenant \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" Tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"find\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"delete\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Connections\"})}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"facades \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenancy\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# setting tenant specific connection\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"tenant \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" Tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"find\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"set_connection\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# resetting to default connection\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Tenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"reset_connection\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"Event though above approach can be used to set tenant specific connection, and do tenant related tasks, it's recommended to use \",(0,n.jsx)(e.code,{children:\"TenantContext\"}),\" instead.\"]}),(0,n.jsxs)(e.h3,{id:\"using-tenant-context\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#using-tenant-context\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Using Tenant Context\"]}),(0,n.jsxs)(e.p,{children:[\"You might sometime need to get data from different tenant in your application or you might have to do some logic based on tenant. In this case you can use \",(0,n.jsx)(e.code,{children:\"TenantContext\"}),\" class to get tenant data.\"]}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"contexts \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` TenantContext\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"models\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Tenant \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenant\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"tenant \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" Tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"where\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'name'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'='\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"first\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"with\"}),\" TenantContext\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# do something with tenant1 data\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"You can also do all other tenant specific tasks like: \",(0,n.jsx)(e.code,{children:\"migrations\"}),\", \",(0,n.jsx)(e.code,{children:\"seeds\"}),\".\"]}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"contexts \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` TenantContext\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" multitenancy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"models\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Tenant \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` Tenant\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"tenant \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" Tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"where\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'name'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'='\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'tenant1'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"first\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"with\"}),\" TenantContext\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\"tenant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# migrate the database\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"migrate\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"migrate_refresh\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"migrate_rollback\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"migrate_reset\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"migrate_status\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# seed the database\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"seed\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"final-step\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#final-step\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Final Step\"]}),(0,n.jsx)(e.p,{children:\"Now the multitenancy is almost ready to use. The final step is to make use of tenancy middleware. This middleware will be used to specify tenant in request on the fly. So, basically you have to attach this middleware to all the routes that are tenant aware.\"}),(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-python\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# config/routes.py\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# ...\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Route\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"get\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"/\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"WelcomeController@show\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Route\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"get\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"/tenant-aware-routes\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"WelcomeController@show\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"middleware\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"multitenancy\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"In above example, \",(0,n.jsx)(e.code,{children:\"/tenant-aware-routes\"}),\" will be tenant aware. It means that if you have tenant setup and you are trying to access \",(0,n.jsx)(e.code,{children:\"/tenant-aware-routes\"}),\" then you will get tenant specific items from the database.\"]})]})}}var b=f;return w;})();\n;return Component;","toc":[{"value":"Masonite Multitenancy (WIP)","url":"#masonite-multitenancy-wip","depth":1},{"value":"Features","url":"#features","depth":3},{"value":"Installation","url":"#installation","depth":3},{"value":"Configuration","url":"#configuration","depth":3},{"value":"Command Usage","url":"#command-usage","depth":3},{"value":"Using Tenancy Facade","url":"#using-tenancy-facade","depth":3},{"value":"Using Tenant Context","url":"#using-tenant-context","depth":3},{"value":"Final Step","url":"#final-step","depth":3}],"frontMatter":{"readingTime":{"text":"5 min read","minutes":4.075,"time":244500,"words":815},"slug":"masonite-multitenancy","fileName":"masonite-multitenancy.md","title":"Masonite Multitenancy","date":"2022-07-17T00:00:00.000Z","tags":["masonite","multitenant","python"],"draft":false,"summary":"Multitenancy is a feature that allows you to have multiple tenants in your application. This is useful for things like a company having multiple websites, or a company having multiple apps."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.97,"time":58200,"words":194},"slug":["default"],"fileName":"default.md","name":"Yubaraj Shrestha","avatar":"/static/images/avatar.jpg","occupation":"Python Engineer","company":null,"email":"yubaraj@pypackage.com","twitter":"https://twitter.com/meyubaraj","linkedin":"https://www.linkedin.com/in/meyubaraj","github":"https://github.com/yubarajshrestha","date":null}],"prev":{"title":"Masonite Sentry","date":"2022-07-12T00:00:00.000Z","tags":["masonite","sentry","python"],"draft":false,"summary":"Sentry SDK implementation for Masonite Apps.","slug":"masonite-sentry"},"next":{"title":"Masonite Instant Articles","date":"2022-07-17T00:00:00.000Z","tags":["masonite","instant-articles","instant","articles","python"],"draft":false,"summary":"This helps you generate facebooks instant articles and also regular feeds with enough customizations you might need.","slug":"masonite-instant-articles"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["masonite-multitenancy"]},"buildId":"aUbmYmKpIpzT8Kae10vzz","assetPrefix":"https://pypackage.com","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>